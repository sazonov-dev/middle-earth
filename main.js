(()=>{"use strict";function e(t){return e="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},e(t)}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(t,n){for(var r=0;r<n.length;r++){var o=n[r];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(t,(void 0,a=function(t,n){if("object"!==e(t)||null===t)return t;var r=t[Symbol.toPrimitive];if(void 0!==r){var o=r.call(t,"string");if("object"!==e(o))return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(t)}(o.key),"symbol"===e(a)?a:String(a)),o)}var a}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var a=function(){function e(t,r){n(this,e),this.name=r,this.soldiers=[],this.count=t}return o(e,[{key:"setSoldier",value:function(e){return this.soldiers=[].concat(function(e){if(Array.isArray(e))return t(e)}(n=this.soldiers)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(n)||function(e,n){if(e){if("string"==typeof e)return t(e,n);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?t(e,n):void 0}}(n)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}(),[e]),this.soldiers;var n}},{key:"removeSoldier",value:function(e){return this.soldiers=this.soldiers.filter((function(t){return t!==e})),this.soldiers}}]),e}(),c=function(){function e(t){n(this,e),this.name=t&&t.name?t.name:null,this.id=this.generateId(),this.type=t&&t.type?t.type:null,this.weapon=t&&t.weapon?t.weapon:null,this.vehicle=t&&t.vehicle?t.vehicle:null,this.hp=t&&t.hp?t.hp:null,this.armor=t&&t.armor?t.armor:null,this.accuracy=t&&t.accuracy?t.accuracy:null,this.speed=t&&t.speed?t.speed:null,this.damage=t&&t.damage?t.damage:null,this.blacklist=t&&t.blackList?t.blackList:null}return o(e,[{key:"getSoldier",value:function(){return{human:{id:null,type:"human",name:"человек",weapon:"секира",vehicle:null,hp:15,armor:8,accuracy:5,speed:5,damage:5,blackList:["orc","orc-high"]},"human-horse":{id:null,type:"human-horse",name:"всадник",weapon:"меч",vehicle:"лошадь",hp:15,armor:6,accuracy:5,speed:7,damage:7,blackList:["orc","orc-high"]},"human-witch":{id:null,type:"human-witch",name:"колдун",weapon:"чары",vehicle:null,hp:6,armor:0,accuracy:10,speed:5,damage:0,blackList:[]},orc:{id:null,type:"orc",name:"орк легкий",weapon:"топор",vehicle:null,hp:15,armor:4,accuracy:5,speed:7,damage:8,blackList:["human","human-horse","elf","human-witch"]},"orc-high":{id:null,type:"orc-high",name:"орк тяжелый",weapon:"топор",vehicle:null,hp:20,armor:10,accuracy:3,speed:0,damage:10,blackList:["human","human-horse","elf","human-witch"]},elf:{id:null,type:"elf",name:"эльф",weapon:"лук",vehicle:null,hp:10,armor:1,accuracy:10,speed:10,damage:6,blackList:["orc","orc-high"]}}}},{key:"getThisSoldier",value:function(){return this}},{key:"generateId",value:function(){return Math.floor(1e4*Math.random())}},{key:"soldierAttack",value:function(e,t){console.log(Number(this[e])-Number(t)),this[e]=Number(this[e])-Number(t),console.log(e,t,this.getThisSoldier())}}]),e}(),i=new c,l=document.querySelector(".gameSettings"),u=Array.from(document.querySelector(".gameSettings").querySelectorAll(".team")),s=document.querySelector(".startNewGame"),d=document.querySelector(".loader"),m=document.querySelector(".content"),h=document.querySelector(".content-team-info"),f=document.querySelector(".content-logs"),y=document.querySelector(".content-history"),p=!1,v={},g=["Генерация мира... Подготовь свое королевство к великим подвигам!","Загрузка ресурсов... Время собрать свою армию и вступить в битву!","Формирование карты... Средиземье оживает под твоим контролем!","Подготовка к битве... Выбери стратегию и покажи свое военное мастерство!","Завершение тренировки... Твои войска готовы к великим подвигам!","Ожидание союзников... Вместе мы сможем завоевать весь мир!"],b=function(e){var t=e.soldiers;return t[Math.floor(Math.random()*t.length)]},S=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=f.querySelector(".content-info"),o=y.querySelector(".content-info"),a=null===t?v["team-one"]:t,c=null===n?v["team-two"]:n;if(0===a.soldiers.length){var i=document.createElement("p");i.classList.add("content-text"),i.textContent="Победила команда ".concat(c.name," с оставшимся кол-вом войск ").concat(c.soldiers.length),o.appendChild(i)}if(0===c.soldiers.length){var l=document.createElement("p");l.classList.add("content-text"),l.textContent="Победила команда ".concat(a.name," с оставшимся кол-вом войск ").concat(a.soldiers.length),o.appendChild(l)}var u=b(a),s=b(c);if(c.soldiers.length>0&&a.soldiers.length>0){var d=document.createElement("p");d.classList.add("content-text"),d.innerText="".concat(u.name," | ").concat(u.id," - нанес дамаг ").concat(null===u.damage?"чарами":u.damage+" с помощью ".concat(u.weapon)," по игроку ").concat(s.name," | ").concat(s.id),r.appendChild(d),function(e,t,n,r){"human-witch"===t.type?(n.removeSoldier(e),r.setSoldier(e)):e.armor>0?e.soldierAttack("armor",t.damage):Number(t.damage)>0&&e.hp>0&&e.armor<=0?e.soldierAttack("hp",t.damage):e.hp<=0&&n.removeSoldier(e)}(s,u,c,a),console.log(v),setTimeout((function(){e(c,a)}),500)}},w=function(e,t){for(var n=0;n<e.length;n++)return t.blacklist.includes(e[n].type)},k=function(){return new c((e=i.getSoldier(),t=Object.keys(e),e[t[Math.floor(Math.random()*t.length)]])).getThisSoldier();var e,t},q=function(){var e=d.querySelector("span"),t=[].concat(g);d.style.display="flex",t.forEach((function(t,n){setTimeout((function(){e.textContent=t}),2e3*n)})),!0===function(){for(var e in v)for(;v[e].soldiers.length<v[e].count;){var t=k();w(v[e].soldiers,t)||v[e].setSoldier(t)}return!0}()&&setTimeout((function(){d.style.display="none",m.classList.add("active"),document.body.style.display="flex",function(e){var t=h.querySelector(".content-info"),n=function(){var n=document.createElement("p");n.classList.add("content-text");var o="",a=e[r].name,c=e[r].count;o+="".concat(a," имеет кол-во войск в размере: ").concat(c,"<br /><br />"),e[r].soldiers.forEach((function(e){o+="".concat(e.name," | ").concat(e.id," - hp:[").concat(e.hp,"] armor:[").concat(e.armor,"] speed:[").concat(e.speed,"] damage:[").concat(e.damage,"]<br /><br />")})),n.innerHTML=o,t.appendChild(n)};for(var r in e)n()}(v),S()}),5e3)};l.addEventListener("submit",(function(e){e.preventDefault();var t=e.target;u.some((function(e){return function(e){if(""===e.value)return e.placeholder="Пустое поле",!0}(e)}))||(t.style.display="none",document.body.style.display="block",u.forEach((function(e){v[e.id]=new a(Number(e.value),e.id),e.value=""})),q())})),u.forEach((function(e){return e.addEventListener("input",(function(){return function(){if(!p){var e=document.getElementById("music");e&&(e.play(),p=!0)}}()}))})),s.addEventListener("click",(function(){var e,t;e=h.querySelector(".content-info").querySelectorAll(".content-text"),t=f.querySelector(".content-info").querySelectorAll(".content-text"),e.forEach((function(e){h.querySelector(".content-info").removeChild(e)})),t.forEach((function(e){f.querySelector(".content-info").removeChild(e)})),document.querySelector(".content").classList.remove("active"),l.style.display="flex"})),console.log(i.getSoldier())})();